<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Rippl - points example</title>
    <meta charset="utf-8">
  </head>
  <body>
    <canvas id="my-canvas" width="400" height="400"></canvas>

    <script src="../rippl.js"></script>
    <script>

      var canvas = new rippl.Canvas({ id: "my-canvas" });

      // last but not least, we draw a circle on each point
      var sun = new rippl.Circle({
        x: 200,
        y: 200,
        color: '#fff',
        stroke: 2,
        strokeColor: '#f00',
        radius: 20,
        z: 2
      });
      var sunPoint = sun.get('position');

      canvas.add(sun);

      var planetPoint = new rippl.RelativePoint(130, 0, sunPoint);
      var planet = new rippl.Circle({
        position: planetPoint,
        color: '#fff',
        stroke: 2,
        strokeColor: '#f00',
        radius: 10,
        z: 2
      });

      canvas.add(planet);

      var moonPoint = new rippl.RelativePoint(30, 0, planetPoint);
      var moon = new rippl.Circle({
        position: moonPoint,
        color: '#fff',
        stroke: 2,
        strokeColor: '#f00',
        radius: 2,
        z: 2
      });

      canvas.add(moon);

      var sunGravity = new rippl.CustomShape({
        fill: false,
        stroke: 1,
        strokeColor: '#000'
      })
      sunGravity.moveTo(sunPoint);
      sunGravity.lineTo(planetPoint);

      canvas.add(sunGravity);

      var planetGravity = new rippl.CustomShape({
        fill: false,
        stroke: 1,
        strokeColor: '#000'
      })
      planetGravity.moveTo(planetPoint);
      planetGravity.lineTo(moonPoint);

      canvas.add(planetGravity);

      // the magic happens here!
      rippl.timer.on('frame', function(time) {
        var sunAngle = time / 500;
        var planetAngle = time / 1500;
        var moonAngle = time / -650;

        sunPoint.move(
          200 + 20 * Math.cos(sunAngle),
          200 + 20 * Math.sin(sunAngle)
        );

        planetPoint.move(
          130 * Math.cos(planetAngle),
          130 * Math.sin(planetAngle)
        );

        moonPoint.move(
          30 * Math.cos(moonAngle),
          30 * Math.sin(moonAngle)
        );
      });

    </script>
  </body>
</html>