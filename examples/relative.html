<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Rippl - relative points example</title>
    <meta charset="utf-8">
  </head>
  <body>
    <canvas id="my-canvas" width="400" height="400"></canvas>

    <script src="../rippl.min.js"></script>
    <script>

      var canvas = new rippl.Canvas({ id: "my-canvas" });

      var crossH = new rippl.CustomShape({
        fill: false,
        stroke: 2,
        strokeColor: '#000',
        z: 3,
        alpha: 0.3
      });
      crossH.moveTo(190, 200);
      crossH.lineTo(210, 200);

      var crossV = new rippl.CustomShape({
        fill: false,
        stroke: 2,
        strokeColor: '#000',
        z: 3,
        alpha: 0.3
      });
      crossH.moveTo(200, 190);
      crossH.lineTo(200, 210);

      canvas.add(crossH);
      canvas.add(crossV);

      var sunPoint = new rippl.Point(200, 200);
      var sun = new rippl.Circle({
        position: sunPoint,
        color: '#fff',
        stroke: 2,
        strokeColor: '#f00',
        radius: 20,
        z: 2
      });
      var sunOrbit = new rippl.Circle({
        position: sunPoint,
        fill: false,
        stroke: 1,
        strokeColor: '#000',
        radius: 130,
        z: 1,
        alpha: 0.3
      });

      canvas.add(sun);
      canvas.add(sunOrbit);

      var planetPoint = new rippl.RelativePoint(130, 0, sunPoint);
      var planet = new rippl.Circle({
        position: planetPoint,
        color: '#fff',
        stroke: 2,
        strokeColor: '#f00',
        radius: 10,
        z: 2
      });
      var planetOrbit = new rippl.Circle({
        position: planetPoint,
        fill: false,
        stroke: 1,
        strokeColor: '#000',
        radius: 30,
        z: 1,
        alpha: 0.3
      });

      canvas.add(planet);
      canvas.add(planetOrbit);

      var moonPoint = new rippl.RelativePoint(30, 0, planetPoint);
      var moon = new rippl.Circle({
        position: moonPoint,
        color: '#fff',
        stroke: 2,
        strokeColor: '#f00',
        radius: 2,
        z: 2
      });

      canvas.add(moon);

      var sunGravity = new rippl.CustomShape({
        fill: false,
        stroke: 1,
        strokeColor: '#000'
      })
      sunGravity.moveTo(sunPoint);
      sunGravity.lineTo(planetPoint);

      canvas.add(sunGravity);

      var planetGravity = new rippl.CustomShape({
        fill: false,
        stroke: 1,
        strokeColor: '#000'
      })
      planetGravity.moveTo(planetPoint);
      planetGravity.lineTo(moonPoint);

      canvas.add(planetGravity);

      // the magic happens here!
      rippl.timer.on('frame', function(time) {
        var sunAngle = time / 500;
        var planetAngle = time / 1500;
        var moonAngle = time / -300;

        sunPoint.move(
          200 + 20 * Math.cos(sunAngle),
          200 + 20 * Math.sin(sunAngle)
        );

        planetPoint.move(
          130 * Math.cos(planetAngle),
          130 * Math.sin(planetAngle)
        );

        moonPoint.move(
          30 * Math.cos(moonAngle),
          30 * Math.sin(moonAngle)
        );
      });

    </script>
  </body>
</html>