<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Rippl - animation example</title>
    <meta charset="utf-8">
  </head>
  <body>
    <div>
      <button id="attack">Attack</button> <button id="hover">Toggle Hover</button> <button id="side">Toggle Side</button>
    </div>
    <canvas id="my-canvas" width="400" height="400"></canvas>

    <script src="../rippl.min.js"></script>
    <script>

      rippl.assets.preload('img/animation.png', function(){

        var canvas = new rippl.Canvas({ id: "my-canvas" });
        var timer = new rippl.Timer({ fps: 60 });
        var hover = true;

        timer.bind(canvas);

        var sprite = new rippl.Sprite({
          src: 'img/animation.png',
          x: 200,
          y: 200,
          snap: true,
          z: 1,
          width: 198,
          height: 166,
          anchorX: 76,
          anchorY: 125,
          anchorInPixels: true,
          fps: 12
        });

        sprite.addAnimation('idle', [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]);
        sprite.addAnimation('attack', [17,18,19,20,21,22,23,24,25,26,27,28,29]);

        sprite.animate();

        canvas.add(sprite);

        var tile = new rippl.CustomShape({
          x: 200,
          y: 200,
          color: new rippl.Color(0,255,0,0.25),
          stroke: 2,
          strokeColor: "#0f0"
        });

        tile.moveTo(-64, 0);
        tile.lineTo(0, -32);
        tile.lineTo(64, 0);
        tile.lineTo(0, 32);
        tile.close();

        canvas.add(tile);

        document.getElementById('attack').onclick = function(){
          sprite.animate('attack');
        }

        document.getElementById('hover').onclick = function(){
          if(hover){
            sprite.set({
              y: 200
            });
            hover = false;
          }else{
            hover = true;
          }
        }

        document.getElementById('side').onclick = function(){
          sprite.set('scaleX', sprite.get('scaleX') * -1);
        }

        timer.on('frame', function(time) {
          var t = time / 1000;
          var sin = Math.sin(t * 2);

          if(hover){
            sprite.set({
              y: 175 + sin * 10
            })
          }
        });

      });

    </script>
  </body>
</html>